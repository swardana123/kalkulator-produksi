<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gabungan Kalkulator Produksi</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom right, #e3f2fd, #ffffff);
      margin: 0;
      padding: 20px;
      color: #333;
    
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom right, #e3f2fd, #ffffff);
      margin: 0;
      padding: 10px;
    }
    .header {
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
      margin-bottom: 20px;
    }
    .header h1 {
      font-size: 1.5rem;
      text-align: center;
    }
    select {
      padding: 8px;
      font-size: 1rem;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .tab-container {
      display: flex;
      margin-bottom: 10px;
      border-radius: 8px;
      overflow: hidden;
    }
    .tab {
      flex: 1;
      padding: 10px;
      background-color: #eee;
      text-align: center;
      cursor: pointer;
      transition: background-color 0.3s;
      font-size: 0.95rem;
    }
    .tab.active {
      background-color: #2196F3;
      color: white;
      font-weight: bold;
    }
    .content {
      display: none;
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .content.active {
      display: block;
    }
    @media (max-width: 600px) {
      .tab {
        font-size: 0.85rem;
        padding: 8px;
      }
      .header h1 {
        font-size: 1.2rem;
      }
    }
  
input, select, button {
  width: 100%;
  max-width: 400px;
  padding: 10px;
  margin: 8px 0;
  font-size: 1rem;
  border-radius: 8px;
  border: 1px solid #ccc;
  box-sizing: border-box;
}

button {
  background-color: #2196F3;
  color: white;
  border: none;
  cursor: pointer;
}

button:hover {
  background-color: #1976D2;
}

.hasil {
  margin-top: 10px;
  font-weight: bold;
  color: #2E7D32;
}

</style>
</head>
<body>

<div class="header">
  <select id="language" onchange="ubahBahasa()">
    <option value="id">Bahasa Indonesia</option>
    <option value="zh">中文 (Mandarin)</option>
    <option value="en">English</option>
  </select>

  <h1>Gabungan Kalkulator Produksi</h1>
  
</div>

<div class="tab-container">
  <div class="tab active" onclick="showTab(0)">Hitung Waktu Produksi</div>
  <div class="tab" onclick="showTab(1)">Kalkulator Produksi Terbaik</div>
</div>

<div id="tab-0" class="content active">
<div class="container pengangkatan">
<h2 id="judulPengangkatan">Hitung Waktu Produksi</h2>
<input id="targetProduksi" type="number" placeholder="Target Produksi (default: 1500)" />
<input id="beratBobbin" type="number" placeholder="Berat Bobbin (default: 15)" />
<input id="jumlahPotongan" type="number" placeholder="Jumlah Potongan per Bobbin (default: 10)" />
<input id="waktuPengangkatan" type="number" placeholder="Waktu Pengangkatan (menit)" />
<input id="tanggalMulai" type="date" />
<input id="jamMulai" type="time" placeholder="Jam Mulai (misal: 10:00)" />
<button id="btnPengangkatan" onclick="hitungWaktuPengangkatan()">Hitung Waktu Pengangkatan</button>
<div class="hasil" id="hasilPengangkatan">Durasi: </div>
</div>

<script>



function hitungWaktuPengangkatan() {
  const target = parseFloat(document.getElementById('targetProduksi').value) || 1500;
  const berat = parseFloat(document.getElementById('beratBobbin').value) || 15;
  const potongan = parseFloat(document.getElementById('jumlahPotongan').value) || 10;
  const waktuVal = parseFloat(document.getElementById('waktuPengangkatan').value);
  const jamMulaiVal = document.getElementById('jamMulai').value;
  const tanggalMulaiVal = document.getElementById('tanggalMulai').value;
  const lang = document.getElementById('language').value;

  if (!waktuVal || !jamMulaiVal || !tanggalMulaiVal) {
    alert(lang === "zh" ? "请完整填写所有必要信息" : lang === "en" ? "Please complete all required fields" : "Mohon lengkapi semua data yang diperlukan");
    return;
  }

  // Hitung durasi produksi dalam jam
  const durasiJam = (target / (berat * potongan)) * (waktuVal / 60);

  // Parse tanggal dan jam mulai
  const [tahun, bulan, hari] = tanggalMulaiVal.split("-").map(Number);
  const [jam, menit] = jamMulaiVal.split(":").map(Number);
  const mulai = new Date(tahun, bulan - 1, hari, jam, menit);

  // Tambah durasi ke tanggal mulai
  const totalMenit = Math.round(durasiJam * 60);
  mulai.setMinutes(mulai.getMinutes() + totalMenit);

  // Format hasil
  const options = { year: 'numeric', month: '2-digit', day: '2-digit' };
  const tanggalSelesai = mulai.toLocaleDateString('id-ID', options);
  const waktuSelesai = mulai.toTimeString().slice(0,5);
  const hasilFormat = `${tanggalSelesai} ${waktuSelesai}`;

  const label = lang === "zh" ? "成品完成时间：" : lang === "en" ? "Finish Time: " : "Perkiraan Waktu Penyelesaian Produksi: ";
  document.getElementById('hasilPengangkatan').innerText = label + hasilFormat;
}

</script>
</div>

<div id="tab-1" class="content">
<div class="container">

<h2 id="judul">TEAM A 2025</h2>
<input id="berat" inputmode="decimal" placeholder="Berat Roll (kg), contoh: 16" step="any" type="number"/>
<select id="bahan" onchange="aturGSMdanPisau()">
<option value="">Pilih Bahan</option>
<option value="Bouyan">Bouyan</option>
<option value="BAT">BAT</option>
<option value="Highlander">Highlander</option>
</select>
<input class="hidden" id="gsm" inputmode="decimal" step="any" type="number"/>
<input class="hidden" id="pisau" inputmode="decimal" step="any" type="number"/>
<input id="speed" inputmode="decimal" placeholder="Kecepatan Belting (default: 10.20)" step="any" type="number"/>
<button id="btnHitung" onclick="hitung()">Hitung Waktu</button>
<div class="hasil" id="hasil">Durasi: </div>
<hr/>
<h3 id="judulAir">Perhitungan Air Recycle</h3>
<input id="jumlahRecycle" placeholder="Jumlah Recycle (contoh: 60)" type="number"/>
<input id="moisture" placeholder="Moisture (default: 0.93 dalam fraksi, misal: 0.93)" step="any" type="number"/>
<input id="konsentrasi" placeholder="Konsentrasi (default: 0.16)" step="any" type="number"/>
<button id="btnAir" onclick="hitungAirRecycle()">Hitung Air Recycle</button>
<div class="hasil" id="hasilAirRecycle">Jumlah Air yang Diperlukan: </div>
<hr/>
<h3 id="judulFlowrate">Angka Flowrate Terbaru</h3>
<div>
<input id="flowAwal" placeholder="Flow rate awal (misal: 0)" step="any" type="number"/>
<input id="kecepatanAwal" placeholder="Kecepatan belting saat ini (misal: 11.5)" step="any" type="number"/>
<input id="kecepatanBaru" placeholder="Kecepatan belting terbaru (misal: 12)" step="any" type="number"/>
<button id="btnFlowrate" onclick="hitungFlowrateBaru()">Hitung Flowrate</button>
<div class="hasil" id="hasilFlowrate">Laju Aliran yang Disarankan: </div>
</div>
</div>
<script>
function aturGSMdanPisau() {
  const bahan = document.getElementById('bahan').value;
  const gsmInput = document.getElementById('gsm');
  const pisauInput = document.getElementById('pisau');
  if (bahan === "Bouyan") {
    gsmInput.value = 0.22;
    pisauInput.value = 0.109;
  } else if (bahan === "BAT") {
    gsmInput.value = 0.18;
    pisauInput.value = 0.138;
  } else if (bahan === "Highlander") {
    gsmInput.value = 0.095;
    pisauInput.value = 0.200;
  } else {
    gsmInput.value = "";
    pisauInput.value = "";
  }
  gsmInput.classList.remove("hidden");
  pisauInput.classList.remove("hidden");
}

function hitung() {
  const gsm = parseFloat(document.getElementById('gsm').value) || 0;
  const pisau = parseFloat(document.getElementById('pisau').value) || 0;
  let speed = parseFloat(document.getElementById('speed').value);
  if (!speed || speed <= 0) speed = 10.20;
  const berat = parseFloat(document.getElementById('berat').value) || 0;
  const waktu = berat / (gsm * pisau * speed);
  const lang = document.getElementById("language").value;
  const label = lang === "zh" ? "时间：" : lang === "en" ? "Time: " : "Durasi: ";
  document.getElementById('hasil').innerText = label + waktu.toFixed(2) + (lang === "zh" ? " 秒" : lang === "en" ? " seconds" : " detik");
}

function hitungAirRecycle() {
  const jumlahRecycle = parseFloat(document.getElementById('jumlahRecycle').value) || 0;
  const moisture = parseFloat(document.getElementById('moisture').value) || 0.93;
  const konsentrasi = parseFloat(document.getElementById('konsentrasi').value) || 0.16;
  const air = (jumlahRecycle * moisture) / konsentrasi - jumlahRecycle;
  const lang = document.getElementById("language").value;
  const label = lang === "zh" ? "所需水量：" : lang === "en" ? "Required Water: " : "Jumlah Air yang Diperlukan: ";
  document.getElementById('hasilAirRecycle').innerText = label + air.toFixed(2);
}

function hitungFlowrateBaru() {
  const flowAwal = parseFloat(document.getElementById('flowAwal').value) || 0;
  const kecepatanAwal = parseFloat(document.getElementById('kecepatanAwal').value) || 1;
  const kecepatanBaru = parseFloat(document.getElementById('kecepatanBaru').value) || 1;
  const hasil = flowAwal / kecepatanAwal * kecepatanBaru;
  document.getElementById('hasilFlowrate').innerText = "Laju Aliran yang Disarankan: " + hasil.toFixed(2);
}

function ubahBahasa() {
  const lang = document.getElementById("language").value;
  document.getElementById("judul").innerText = "TEAM A 2025";
  document.getElementById("judulAir").innerText = lang === "zh" ? "循环水计算" : lang === "en" ? "Water Recycle Calculation" : "Perhitungan Air Recycle";
  document.getElementById("judulFlowrate").innerText = lang === "zh" ? "最新流速" : lang === "en" ? "Latest Flowrate" : "Angka Flowrate Terbaru";

  document.getElementById("berat").placeholder = lang === "zh" ? "卷重（公斤），例如：16" : lang === "en" ? "Roll Weight (kg), e.g.: 16" : "Berat Roll (kg), contoh: 16";
  document.getElementById("bahan")[0].text = lang === "zh" ? "选择材料" : lang === "en" ? "Select Material" : "Pilih Bahan";
  document.getElementById("speed").placeholder = lang === "zh" ? "皮带速度（默认：10.20）" : lang === "en" ? "Belt Speed (default: 10.20)" : "Kecepatan Belting (default: 10.20)";
  document.getElementById("jumlahRecycle").placeholder = lang === "zh" ? "循环数量，例如：60" : lang === "en" ? "Recycle Amount (e.g.: 60)" : "Jumlah Recycle (contoh: 60)";
  document.getElementById("moisture").placeholder = lang === "zh" ? "水分 (默认值：0.93，单位为小数)" : lang === "en" ? "Moisture (default: 0.93 in fraction)" : "Moisture (default: 0.93 dalam fraksi, misal: 0.93)";
  document.getElementById("konsentrasi").placeholder = lang === "zh" ? "浓度 (默认值：0.16)" : lang === "en" ? "Concentration (default: 0.16)" : "Konsentrasi (default: 0.16)";
  document.getElementById("btnHitung").innerText = lang === "zh" ? "计算时间" : lang === "en" ? "Calculate Time" : "Hitung Waktu";
  document.getElementById("btnAir").innerText = lang === "zh" ? "计算循环水" : lang === "en" ? "Calculate Water Recycle" : "Hitung Air Recycle";
  
  document.getElementById("hasil").innerText = lang === "zh" ? "时间：" : lang === "en" ? "Time: " : "Durasi: ";
  document.getElementById("hasilAirRecycle").innerText = lang === "zh" ? "所需水量：" : lang === "en" ? "Required Water: " : "Jumlah Air yang Diperlukan: ";
  document.getElementById("hasilFlowrate").innerText = lang === "zh" ? "您应有的流速: " : lang === "en" ? "Your expected flow rate: " : "Laju Aliran yang Disarankan: ";
  document.getElementById("btnFlowrate").innerText = lang === "zh" ? "计算流速" : lang === "en" ? "Calculate Flowrate" : "Hitung Flowrate";
  document.getElementById("flowAwal").placeholder = lang === "zh" ? "初始流速（例如：0）" : lang === "en" ? "Initial flow rate (e.g.: 0)" : "Flow rate awal (misal: 0)";
  document.getElementById("kecepatanAwal").placeholder = lang === "zh" ? "当前皮带速度（例如：11.5）" : lang === "en" ? "Current belt speed (e.g.: 11.5)" : "Kecepatan belting saat ini (misal: 11.5)";
  document.getElementById("kecepatanBaru").placeholder = lang === "zh" ? "最新皮带速度（例如：12）" : lang === "en" ? "New belt speed (e.g.: 12)" : "Kecepatan belting terbaru (misal: 12)";
}
</script>
</div>

<script>
function showTab(index) {
  const tabs = document.querySelectorAll('.tab');
  const contents = document.querySelectorAll('.content');
  tabs.forEach((tab, i) => {
    tab.classList.toggle('active', i === index);
    contents[i].classList.toggle('active', i === index);
  });
}

function ubahBahasa() {
  const lang = document.getElementById("language").value;

  const updateTexts = {
    id: {
      judul0: "Hitung Waktu Produksi",
      judul1: "Kalkulator Produksi Terbaik"
    },
    zh: {
      judul0: "生产时间计算",
      judul1: "最佳生产计算器"
    },
    en: {
      judul0: "Production Time Calculation",
      judul1: "Best Production Calculator"
    }
  };

  const tabs = document.querySelectorAll(".tab");
  tabs[0].textContent = updateTexts[lang].judul0;
  tabs[1].textContent = updateTexts[lang].judul1;

  // Trigger internal language changes
  const allScripts = document.querySelectorAll(".content script");
  allScripts.forEach(script => {
    if (script.innerText.includes("ubahBahasa")) {
      try {
        eval(script.innerText);
        if (typeof ubahBahasa === "function") {
          ubahBahasa();
        }
      } catch (err) {
        console.error("Error applying language:", err);
      }
    }
  });
}
</script>


<script>
function ubahBahasa() {
  const lang = document.getElementById("language").value;
  const texts = {
    id: {
      tab0: "Hitung Waktu Produksi",
      tab1: "Kalkulator Produksi Terbaik",
      waktu: "Durasi:",
      air: "Jumlah Air yang Diperlukan:",
      flow: "Laju Aliran yang Disarankan:",
      hitung: "Hitung Waktu",
      recycle: "Hitung Air Recycle",
      flowBtn: "Hitung Flowrate"
    },
    en: {
      tab0: "Production Time Calculation",
      tab1: "Optimal Production Calculator",
      waktu: "Duration:",
      air: "Required Water Amount:",
      flow: "Recommended Flow Rate:",
      hitung: "Calculate Time",
      recycle: "Calculate Water Recycle",
      flowBtn: "Calculate Flowrate"
    },
    zh: {
      tab0: "生产时间计算",
      tab1: "最佳生产计算器",
      waktu: "时长：",
      air: "所需水量：",
      flow: "建议流速：",
      hitung: "计算时间",
      recycle: "计算水回收量",
      flowBtn: "计算流速"
    }
  };
  document.querySelectorAll(".tab")[0].textContent = texts[lang].tab0;
  document.querySelectorAll(".tab")[1].textContent = texts[lang].tab1;
  document.getElementById("hasilPengangkatan").innerText = texts[lang].waktu;
  document.getElementById("hasil").innerText = texts[lang].waktu;
  document.getElementById("hasilAirRecycle").innerText = texts[lang].air;
  document.getElementById("hasilFlowrate").innerText = texts[lang].flow;
  document.getElementById("btnHitung").innerText = texts[lang].hitung;
  document.getElementById("btnAir").innerText = texts[lang].recycle;
  document.getElementById("btnFlowrate").innerText = texts[lang].flowBtn;
}
</script>
</body>
</html>
